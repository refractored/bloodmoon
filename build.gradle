/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.4.2/samples
 */

apply plugin: 'java'

repositories {
    mavenCentral()

    maven { url = 'https://hub.spigotmc.org/nexus/content/repositories/snapshots/' }
    maven { url = 'https://oss.sonatype.org/content/repositories/snapshots' }
    maven { url = 'https://oss.sonatype.org/content/repositories/central' }
    maven { url = 'https://maven.enginehub.org/repo/' }
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

dependencies {
    compileOnly 'org.spigotmc:spigot-api:1.18.2-R0.1-SNAPSHOT'
    compileOnly 'com.sk89q.worldguard:worldguard-bukkit:7.0.0'
    implementation 'org.yaml:snakeyaml:1.23'
    implementation 'org.jetbrains:annotations:18.0.0'
    implementation (files ('libs/SQLAccess.jar') )
}

jar {
    from {
        configurations.runtimeClasspath.findAll { it.name.endsWith('jar') }.collect { zipTree(it) }
    }

    destinationDirectory.set(file("exes/server/plugins"))
}


task runSpigot(type: Exec) {
    standardInput = System.in

    workingDir 'exes/server'
    commandLine 'cmd', '/c', 'java', '-jar', file('exes/paper.jar'), 'nogui'
}